// This file is a part of xray-ng engine
//

#pragma once

#include "corlib/types.h"

//-----------------------------------------------------------------------------------------------------------
XR_NAMESPACE_BEGIN(xr, sys)

//-----------------------------------------------------------------------------------------------------------
typedef uint32_t tls_handle;
XR_CONSTEXPR_CPP14_OR_CONST uint32_t invalid_thread_local_storage = UINT32_MAX;

//-----------------------------------------------------------------------------------------------------------
/**
*/
tls_handle create_thread_local();

//-----------------------------------------------------------------------------------------------------------
/**
*/
bool set_tls_data(tls_handle const tls, void* data);

//-----------------------------------------------------------------------------------------------------------
/**
*/
void* get_tls_data(tls_handle const tls);

//-----------------------------------------------------------------------------------------------------------
/**
*/
template<typename T>
T* get_tls_typed_data(tls_handle const tls)
{
    return reinterpret_cast<T*>(get_tls_data(tls));
}

//-----------------------------------------------------------------------------------------------------------
/**
*/
void destroy_thread_local(tls_handle const tls);

XR_NAMESPACE_END(xr, sys)
//-----------------------------------------------------------------------------------------------------------
